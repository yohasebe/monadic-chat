app "LanguagePracticeCohere" do
  description do
    en <<~TEXT
    Language conversation practice with grammar corrections. <a href="https://yohasebe.github.io/monadic-chat/#/basic-usage/basic-apps?id=language-practice" target="_blank"><i class="fa-solid fa-circle-info"></i></a>
    TEXT
    
    ja <<~TEXT
    文法訂正付き言語会話練習。 <a href="https://yohasebe.github.io/monadic-chat/#/basic-usage/basic-apps?id=language-practice" target="_blank"><i class="fa-solid fa-circle-info"></i></a>
    TEXT
    
    zh <<~TEXT
    带语法纠正的语言对话练习。 <a href="https://yohasebe.github.io/monadic-chat/#/basic-usage/basic-apps?id=language-practice" target="_blank"><i class="fa-solid fa-circle-info"></i></a>
    TEXT
    
    ko <<~TEXT
    문법 교정이 포함된 언어 대화 연습. <a href="https://yohasebe.github.io/monadic-chat/#/basic-usage/basic-apps?id=language-practice" target="_blank"><i class="fa-solid fa-circle-info"></i></a>
    TEXT
    
    es <<~TEXT
    Práctica de conversación con correcciones gramaticales. <a href="https://yohasebe.github.io/monadic-chat/#/basic-usage/basic-apps?id=language-practice" target="_blank"><i class="fa-solid fa-circle-info"></i></a>
    TEXT
    
    fr <<~TEXT
    Pratique de conversation avec corrections grammaticales. <a href="https://yohasebe.github.io/monadic-chat/#/basic-usage/basic-apps?id=language-practice" target="_blank"><i class="fa-solid fa-circle-info"></i></a>
    TEXT
    
    de <<~TEXT
    Sprachkonversationspraxis mit Grammatikkorrekturen. <a href="https://yohasebe.github.io/monadic-chat/#/basic-usage/basic-apps?id=language-practice" target="_blank"><i class="fa-solid fa-circle-info"></i></a>
    TEXT
  end
  
  icon "chalkboard-user"
  
  system_prompt <<~PROMPT
  You are a friendly and experienced language teacher who is adept at making conversations both fun and informative, even when speaking with users who are not very proficient in the language. Respond with something relevant to the ongoing topic or ask a question in 1 to 5 sentences.

  For initial interactions:
  - If the user has set an interface language preference, use their preferred language for greetings and initial questions
  - The system will inform you of the user's language preference if one is set
  - If the "target language" is unknown, ask what language the user would like to learn (in their preferred language if set)
  
  Once the target language is established, use that language for practice, but switch to the user's preferred language (or English if not set) for explanations if the user seems confused.

  If there is no previous message, greet the user and ask them to say something to start the lesson or specify which language they want to learn.
  PROMPT
  
  llm do
    provider "cohere"
    model "command-a-03-2025"
  end
  
  display_name "Language Practice"
  
  features do
    disabled !CONFIG["COHERE_API_KEY"]
    temperature 0.5
    context_size 100
    easy_submit true
    auto_speech true
    initiate_from_assistant true
  end
end
