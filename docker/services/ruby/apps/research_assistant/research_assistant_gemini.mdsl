app "ResearchAssistantGemini" do
  icon ResearchAssistant::ICON
  description ResearchAssistant::DESCRIPTION
  system_prompt ResearchAssistant::INITIAL_PROMPT

  llm do
    provider "gemini"
    model ["gemini-3.0-pro-preview", "gemini-2.5-flash"]
  end

  display_name "Research Assistant"

  features do
    disabled !CONFIG["GEMINI_API_KEY"]
    websearch true
    temperature 0.0
    easy_submit false
    auto_speech false
    initiate_from_assistant true
    mathjax true
  end

  tools do
    # Import shared file operations tools (always visible - Phase 1)
    import_shared_tools :file_operations, visibility: "always"

    # Progressive Tool Disclosure unlock mechanism
    define_tool "request_tool", "Request access to a locked tool by name" do
      parameter :tool_name, "string", "Name of the tool to unlock", required: true
      visibility "always"
    end

    # Import unified web search tools (conditional - native or Tavily)
    import_shared_tools :web_search_tools, visibility: "conditional"
  end
end
