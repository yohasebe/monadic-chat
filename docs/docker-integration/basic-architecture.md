# Basic Architecture

Monadic Chat provides advanced features that cannot be achieved with just the language model API by incorporating a virtual environment built as a Docker container into the system.

Both users and AI agents can access the Docker container, allowing them to collaborate through natural language communication to bring about changes in the environment. Specifically, under the user's instructions, the AI agent can install commands, learn how to use them, execute commands, and return results.

It also provides a mechanism for sharing data between the host computer and individual Docker containers. This allows users to seamlessly collaborate with the virtual environment, providing necessary files to the AI agent and retrieving files generated by the AI agent.

![Basic Architecture](../assets/images/basic-architecture.png ':size=800')

## Server and Standalone Modes

Monadic Chat can operate in two primary modes:

### Standalone Mode
- Default operating mode
- All components run on a single machine
- Docker containers, web server, and UI are on the same device
- Network bindings use `127.0.0.1` (localhost) for enhanced security
- Only accessible from the device it runs on
- All features including Jupyter Notebook are available

### Server Mode
- Enables multiple clients to connect to a central server
- Server hosts Docker containers and web services
- Clients connect through their web browsers
- Network bindings use `0.0.0.0` (all network interfaces)
- Network URLs use the server's external IP address
- Enables sharing resources across multiple users
- Jupyter-related features are disabled for security reasons

>! **Security Warning**: When exposing Monadic Chat in Server Mode to external networks, especially the internet, implement appropriate security measures such as firewalls, reverse proxies, and authentication mechanisms. The default configuration has no built-in authentication, so it should only be used on trusted networks or with additional security layers.

To switch between modes in the desktop application:

1. Click on the settings icon in the top-right corner
2. Choose either "Standalone Mode" or "Server Mode"
3. Save and restart the application when prompted

To enable Server Mode when running from source code, set the environment variable `DISTRIBUTED_MODE=server` when starting Monadic Chat.

## Standard Docker Containers

This section explains the standard Docker containers available in Monadic Chat. By default, the following containers are built:

**Ruby Container** (`monadic-chat-ruby-container`)
This container is necessary to run Monadic Chat applications. It is also used to provide the web interface.

**Python Container** (`monadic-chat-python-container`)
This container is used to run Python scripts that extend the functionality of Monadic Chat. JupyterLab also runs on this container.

Apps that use this container include: `Code Interpreter`, `Jupyter Notebook`, `Video Describer`

**Selenium Container** (`monadic-chat-selenium-container`)
This container is used to operate a virtual web browser using Selenium for web scraping.

Apps that use this container include: `Code Interpreter`, `Content Reader`

**pgvector Container** (`monadic-chat-pgvector-container`)
This container is used to store text embedding vector data on PostgreSQL for using pgvector. Apps that use this container include: `PDF Navigator`.

**Ollama Container** (`monadic-chat-ollama-container`)
Provides local LLMs via [Ollama](https://ollama.com), hosting models such as Llama, Phi, Mistral, Gemma, and DeepSeek. For setup instructions, see [Using Ollama](../advanced-topics/ollama.md).

You can install new software on a Docker container or edit files to extend the functionality of Monadic Chat.
For more information on adding Docker containers, see [Adding Docker Containers](../advanced-topics/adding-containers.md).

## Container Rebuilding Process

When the application is updated, Monadic Chat intelligently determines which containers need to be rebuilt:

1. For new installations, all containers are built from scratch
2. On version updates:
   - The system checks if Dockerfiles for Python, Selenium, and PGVector containers have changed
   - If changes are detected, a full rebuild of all containers is performed
   - If no changes are detected, only the Ruby container is rebuilt

This optimized rebuilding process saves time during updates when only Ruby code has changed, which is the most common update scenario.