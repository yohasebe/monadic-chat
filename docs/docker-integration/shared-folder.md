# Shared Folder

When you first start Monadic Chat, a `~/monadic/data` directory is created. This directory is the default Shared Folder for sharing files within Monadic Chat's Docker containers.

Clicking the `Shared Folder` button in the Monadic Chat console will launch the OS's standard file manager and open the Shared Folder.

![Monadic Chat Console](../assets/images/monadic-chat-console.png ':size=700')

By placing files in this directory, you can access those files within Monadic Chat's Docker containers. The path to the Shared Folder within each Docker container is `/monadic/data`, while the path on your local machine is `~/monadic/data`.

In apps that can execute code (e.g., Code Interpreter app), you can read files from the Shared Folder. When specifying a file, provide only the file name without the directory path.

During the execution of some processes on the AI agent side (using function calling, for example), intermediate files may be saved in the Shared Folder. It is recommended to periodically check and delete unnecessary files.

When you use the `Actions/Start JupyterLab` menu in the Monadic Chat console to launch JupyterLab, it starts with `/monadic/data` as the home directory. This allows you to access files in the Shared Folder within JupyterLab as well.

## Examples of Files Saved in the Shared Folder

### Files Generated by Basic Apps

- `code interpreter` app: Intermediate and result files generated during code execution (e.g., CSV files, text files, image files).
- `image generator` app: Generated image files (PNG, JPEG, WebP formats).
- `video generator` app: Generated video files (MP4 format).
- `jupyter notebook` app: Jupyter Notebook `.ipynb` files.
- `video describer` app: Extracted image frames (PNG format) and audio (MP3 format) from videos.
- `speech draft helper` app: Generated speech audio files (MP3 format for OpenAI/ElevenLabs, WAV format for Gemini).
- `syntax tree` app: Generated syntax tree diagrams (SVG format).
- `concept visualizer` app: Generated concept diagrams (SVG format).
- `mermaid grapher` app: Generated diagram preview images (PNG format).
- `drawio grapher` app: Generated diagram files (.drawio format).

It's recommended to periodically clean up unnecessary files from these app directories.

## Structure inside the Shared Folder

When developing or adding additional apps other than the basic apps, you need to place the necessary files and folders within the Shared Folder correctly. The following are subfolders that are automatically created inside the Shared Folder. For information on how to develop additional apps, see [Developing Apps](./developing-apps.md).

**`apps`**

This folder stores additional applications beyond the pre-installed basic apps.  Each app should reside in its own subfolder within the `apps` directory.

**`services`**

This folder contains Docker-related files (like `Dockerfile` and `compose.yml`) for building and running the Docker images and containers required for additional apps. Each service should have its own subfolder.

**`helpers`**

This folder stores helper Ruby files containing functions (methods) used by your apps. These helper files are loaded before the app's recipe file, allowing you to organize and reuse common code across multiple apps.

**`scripts`**

This folder contains executable scripts (e.g., shell scripts, Python scripts, Ruby scripts) that can be run within any Monadic Chat container. Scripts placed here are automatically made executable and added to the container's PATH, allowing direct execution by name without specifying the full path.

### How User Scripts Work

1. **Location**: Place scripts in `~/monadic/data/scripts` on your host machine
2. **Container Path**: Scripts are available at `/monadic/data/scripts` in containers
3. **Automatic Permissions**: Scripts are automatically made executable before each command execution
4. **Direct Execution**: Call scripts by name only (e.g., `my_script.py` instead of `/monadic/data/scripts/my_script.py`)
5. **Container Support**: Works with Ruby, Python, and other containers

### Example Usage in Apps

```ruby
# Execute a custom Python script
send_command(
  command: "analyze_data.py input.csv output.json",
  container: "python"
)

# Execute a custom Ruby script
send_command(
  command: "process_text.rb document.txt",
  container: "ruby"
)

# Execute a shell script
send_command(
  command: "backup_data.sh",
  container: "python"  # or any container with bash
)
```

### Technical Details

- The `send_command` method in Monadic Chat automatically adds `/monadic/data/scripts` to the PATH environment variable
- Working directory is set to `/monadic/data` when executing commands
- Scripts can access other files in the shared folder using relative paths
- This mechanism allows extending Monadic Chat's functionality without modifying core code

**`plugins`**

This folder is for organizing Monadic Chat plugins. Each plugin should reside in its own subfolder and can contain its own `apps`, `helpers`, and `services` subfolders to keep the plugin's code self-contained.  Note that plugin folders cannot contain a `scripts` subfolder; scripts should be placed in the main `scripts` directory at the root of the Shared Folder.
