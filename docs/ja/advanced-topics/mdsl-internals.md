# MDSL概要

?> このドキュメントは、アプリ開発者向けにMonadic DSL (MDSL)の仕組みについて説明します。

## MDSLとは

Monadic DSL (MDSL)は、Monadic ChatでAIアプリケーションを作成するためのシンプルなRubyベースの言語です。異なるAIプロバイダーの複雑さを処理するので、アプリの構築に集中できます。

## 主要な概念

### 1. プロバイダー独立性
一度アプリを書けば、すべてのサポートされているプロバイダーで動作します：
- OpenAI（GPTモデル）
- Anthropic（Claudeモデル）  
- Google（Geminiモデル）
- その他多数

### 2. 命名規則
**重要**：アプリ名はRubyクラス名と一致する必要があります：
- `app "ChatOpenAI"`には`class ChatOpenAI < MonadicApp`が必要
- これにより適切なメニューグループ化と機能が保証されます

### 3. ファイル構成
アプリを整理しましょう：
```
~/monadic/data/apps/
├── my_app/
│   ├── my_app_openai.mdsl    # アプリ定義
│   ├── my_app_openai.rb      # Ruby実装（オプション）
│   └── my_app_tools.rb       # 共有ツール（オプション）
```

## 使用可能な機能

### 利用可能な機能
- `monadic` - JSONベースのコンテキスト管理を有効化
- `context_size` - 会話履歴のサイズを設定
- `easy_submit` - Enterキーによる送信を有効化
- `auto_speech` - 自動音声を有効化
- `image` - 画像アップロードを許可
- `pdf` - PDFアップロードを許可

### プロバイダー固有の機能
一部の機能はプロバイダーによって動作が異なります：
- Web検索機能
- 画像生成
- 音声オプション

## ツールシステム

AIが使用できるツール（関数）を定義します：
```ruby
tools do
  define_tool "get_weather", "現在の天気を取得" do
    parameter :location, "string", "都市名", required: true
  end
end
```

MDSLシステムは自動的にこれらを各プロバイダー用にフォーマットします。

## ベストプラクティス

1. **シンプルに始める** - 複雑なツールを追加する前に基本的なチャットアプリから始める
2. **複数のプロバイダーでテスト** - アプリが複数のAIプロバイダーで動作することを確認
3. **明確な説明を使用** - ユーザーがアプリの機能を理解できるようにする
4. **例に従う** - 既存のアプリからパターンやアイデアを参照

## よくある問題と解決策

| 問題 | 解決策 |
|------|--------|
| アプリがメニューに表示されない | アプリ名がクラス名と一致しているか確認 |
| ツールが動作しない | ツール定義がシステムプロンプトと一致しているか確認 |
| 機能が利用できない | 一部の機能はプロバイダー固有です |

## 次のステップ

- 詳細な構文については[Monadic DSLガイド](./monadic_dsl.md)を参照
- 完全なチュートリアルは[アプリ開発](./develop_apps.md)を参照
- 例については[基本アプリ](../basic-usage/basic-apps.md)を確認

?> **ヘルプが必要ですか？** MDSLとアプリ開発に関する支援はMonadic Helpアプリを使用してください。