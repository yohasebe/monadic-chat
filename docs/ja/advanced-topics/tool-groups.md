# ツールグループ

## 概要

ツールグループは、複数のアプリケーション間で共有できる関連ツールのコレクションです。アプリを作成または使用する際、どのツールグループが利用可能かを示すバッジが表示されます。

## ツールグループバッジ

ツールグループバッジはアプリセレクターインターフェースに表示され、利用可能なツールを示します：

- **青色バッジ** (🔧): 常時利用可能なツール（例：ファイル操作、Python実行）
- **黄色バッジ** (⚡): 条件付き利用可能なツール（例：Web自動化 - Seleniumが必要）

バッジには、ツールグループ名とそのグループ内のツール数が表示されます。

## 利用可能なツールグループ

### 常時利用可能

これらのツールグループは常に利用可能で、追加のセットアップは不要です：

#### Jupyter操作（12ツール）
- Jupyterノートブックの作成と管理
- ノートブックへのセル追加
- JupyterLabでのコード実行
- ノートブックコンテンツの一覧表示と取得

**このツールを使用するアプリ**: Jupyter Notebook（全プロバイダー）

#### Python実行（4ツール）
- サンドボックス化されたコンテナでのPythonコード実行
- Python環境とパッケージのチェック
- 計算ライブラリへのアクセス（NumPy、Pandasなど）

**このツールを使用するアプリ**: Python Coder、Code Runner

#### ファイル操作（3ツール）
- 共有フォルダへのファイル書き込み
- 共有フォルダ内のファイル一覧表示
- 共有フォルダからのファイル削除

**このツールを使用するアプリ**: Chat Plus、Code Runner、Jupyter Notebook

#### ファイル読み込み（3ツール）
- 共有フォルダからのテキストファイル読み込み
- PDFファイルからのテキスト抽出
- Officeドキュメント（Word、Excel、PowerPoint）からのテキスト抽出

**このツールを使用するアプリ**: Research Assistant、Document Analyzer、Chat Plus

### 条件付き利用可能

これらのツールグループは、特定のコンテナまたはAPIキーが利用可能である必要があります：

#### Web自動化（4ツール）
**必要条件**: Seleniumコンテナが実行中

- Webページのビューポートサイズスクリーンショットのキャプチャ
- 全ページスクリーンショットのキャプチャ
- 自動テストによるWebアプリケーションのデバッグ
- Webコンテンツのスクレイピング

**このツールを使用するアプリ**: Visual Web Explorer（全プロバイダー）、AutoForge（全プロバイダー）

**有効化方法**:
1. **アクション**メニューを開く
2. **Seleniumコンテナ起動**を選択
3. コンテナの起動を待つ
4. ツールグループバッジが利用不可から利用可能に変わる

#### 動画分析（1ツール）
**必要条件**: OpenAI APIキーが設定済み

- マルチモーダルAIを使用した動画コンテンツの分析
- 動画フレームからの説明生成

**このツールを使用するアプリ**: Video Describer

**有効化方法**:
1. 設定でOpenAI APIキーを設定
2. ツールグループが自動的に利用可能になる

## ツールの可用性について

### ツールが利用できない理由

ツールが利用できない理由はいくつかあります：

1. **コンテナの不足**: 一部のツールはDockerコンテナ（Selenium、Python）が実行中である必要がある
2. **APIキーの不足**: 一部のツールは特定のAPIキーが設定されている必要がある
3. **システム要件**: 一部のツールは特定のシステムリソースや依存関係を必要とする場合がある

### エラーメッセージ

利用できないツールを使用しようとすると、以下を説明する明確なエラーメッセージが表示されます：
- 何が不足しているか（例：「Seleniumコンテナが実行されていません」）
- 修正方法（例：「アクションメニューからSeleniumコンテナを起動してください」）

## ツールグループを使用したアプリの作成

MDSLを使用してカスタムアプリを作成する場合、個別にツールを定義する代わりにツールグループをインポートできます。詳細については、[Monadic DSLドキュメント](monadic_dsl.md)を参照してください。

### 例

```ruby
MonadicApp.register "MyCustomApp" do
  llm do
    provider "openai"
    model "gpt-4.5-preview"
  end

  # ファイル操作ツールをインポート
  import_shared_tools :file_operations, visibility: "always"

  # Web自動化ツールをインポート（Seleniumに依存）
  import_shared_tools :web_automation, visibility: "conditional"
end
```

## ツールグループのメリット

1. **一貫性**: ツールはすべてのアプリで同じように動作
2. **明確性**: 追加セットアップが必要な機能を明確に表示
3. **エラー防止**: 利用できないツールは非表示または役立つエラーメッセージを表示
4. **効率性**: ツールグループはアプリ間で再利用され、コードの重複を削減

## トラブルシューティング

### ツールグループが利用不可のまま

必要なコンテナを起動した後でもツールグループが利用不可と表示される場合：

1. **アプリリストを更新**: UIは10秒ごとに可用性をチェック
2. **コンテナを再起動**: アクションメニューからコンテナを停止して起動
3. **コンテナステータスを確認**: `アクション → コンテナステータス表示` でコンテナが実行中か確認
4. **ログを確認**: コンテナログに起動を妨げるエラーが表示される場合がある

### ツールが期待通りに動作しない

ツールが利用可能だが正しく動作しない場合：

1. **共有フォルダの権限を確認**: ファイルがアクセス可能か確認
2. **APIキーを確認**: APIキーが有効で十分なクレジットがあるか確認
3. **コンテナログを確認**: コンテナ出力でエラーを探す
4. **アプリを再起動**: Monadic Chatを再起動することで解決する問題もある

## 関連ドキュメント

- [Monadic DSL](monadic_dsl.md) - カスタムアプリの作成
- [Docker統合](../docker-integration/docker-architecture.md) - コンテナ管理
- [共有フォルダ](../docker-integration/shared-folder.md) - ファイル操作
