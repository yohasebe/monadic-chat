# AutoForge / Artifact Builder

AutoForge（「Artifact Builder」として提供）は、インテリジェントなAIオーケストレーションを通じて、完全な単一ファイルWebアプリケーション*およびコマンドラインツール*を自律的に作成するアプリケーションビルダーです。

## 概要

AutoForgeは、計画とオーケストレーションに高度なAIモデルを使用し、プロバイダー固有のコード生成モデルと組み合わせます。外部依存関係を必要としない、CSS・JavaScriptを組み込んだ自己完結型HTMLアプリケーションや、スタンドアロンCLIスクリプトを作成します。

## 主な機能

### 1. インテリジェントなアプリケーション生成
- **自律的な計画**: 高度なAIモデルが要件を分析し、詳細な実装計画を作成
- **プロバイダー固有のコード生成**: 専門的なコード生成モデルがプロダクション準備の完了したアーティファクトを提供
- **単一ファイル出力**: WebアプリはHTMLファイル1つ、CLIツールはスタンドアロンスクリプトとして提供

### 2. CLIツールサポート
- **言語の自動検出**: AutoForgeは要求された動作に基づいて、Python、Ruby、Node.jsなどの言語を選択
- **必要に応じたオプション資産**: README、設定テンプレート、依存関係マニフェストは、プロジェクトが実際に恩恵を受ける場合のみ提案
- **実行可能なガイダンス**: 生成後の指示には、権限設定、実行コマンド、次のステップが含まれる
- **カスタムテキスト資産**: `file_name`と`instructions`を指定することで、追加のMarkdown、設定、ドキュメントファイルを生成可能

### 3. プロジェクト管理
- **自動整理**: プロジェクトはタイムスタンプと説明的な名前で保存
- **Unicode対応**: プロジェクト名に国際文字を完全サポート
- **変更サポート**: 既存アプリケーションを反復的に更新可能
- **プロジェクト一覧**: 以前に生成したすべてのプロジェクトを表示

### 4. Seleniumを使用したデバッグ（オプション、Webアプリのみ）
- **自動テスト**: Seleniumを介してヘッドレスChromeでアプリケーションを実行
- **エラー検出**: JavaScriptエラーとコンソール警告を識別
- **パフォーマンスメトリクス**: 読み込み時間、DOM準備、レンダリング時間を測定
- **機能テスト**: インタラクティブ要素が正しく動作することを確認

## 使用方法

### 基本的なワークフロー

1. **会話を開始**: Artifact Builderを開き、構築したいものを説明
2. **要件を提供**: アプリケーション名、タイプ、説明、機能を指定
3. **アプリケーション生成**: システムが自動的にアプリケーションを作成
4. **デバッグ（オプション）**: Seleniumが利用可能な場合、アプリケーションをテストしてエラーをチェック
5. **必要に応じて変更**: 機能を改善または追加するための変更を要求

### アプリケーション例

Artifact Builderは、さまざまなタイプのWebアプリケーションを作成できます：
- 科学計算機
- ローカルストレージを使用したTodoリストアプリケーション
- カウントダウンタイマー
- 描画キャンバスアプリケーション
- 記憶カードゲーム
- フォームビルダー
- Markdownエディター
- カラーパレットジェネレーター

Artifact Builderは、以下のようなCLIユーティリティもサポートします：
- ランタイムと環境インスペクター
- データ変換スクリプト（CSV/JSON/XML）
- バックアップとアーカイブヘルパー
- ログアナライザーとストリームプロセッサー
- ファイルオーガナイザーと一括リネームツール

### ツールコマンド

システムは要求できるいくつかのツールを提供します：

#### `generate_application`
仕様に基づいてアプリケーションを作成または変更します。

例：
```json
{
  "spec": {
    "name": "TodoApp",
    "type": "productivity",
    "description": "シンプルなTodoリストマネージャー",
    "features": ["タスク追加", "完了マーク", "タスク削除", "ローカルストレージ"]
  }
}
```

#### `debug_application`
Seleniumを使用して既存のWebアプリケーションをテストします（Seleniumコンテナが必要）。

例：
```json
{
  "spec": {
    "name": "TodoApp"
  }
}
```

#### `list_projects`
以前に生成されたすべてのプロジェクトを、その場所と作成時刻とともに表示します。

#### `validate_specification`
生成前にアプリケーション仕様が完全かどうかをチェックします。

#### `generate_additional_file`
CLIプロジェクトで利用可能。明確な価値を追加する場合にオプション資産を生成：
- `readme` – 生成されたスクリプトの使用方法
- `config` – ツールが設定入力を参照する場合の設定ファイルテンプレート
- `requirements` – 非標準ライブラリが検出された場合の依存関係リスト（例：`requirements.txt`や`Gemfile`）
- `usage_examples` – 実際のシナリオを含むMarkdownガイド（豊富なフラグ解析を持つツールに自動的に提案）
- **カスタムファイル** – `file_name`と`instructions`の両方を指定して、任意のテキストベースのアーティファクトを作成（例：`USAGE.md`、`CHANGELOG.md`、`.env.example`）

例（カスタム資産）：
```json
{
  "file_name": "USAGE.md",
  "instructions": "コマンドと予想される出力を含む3つの典型的なワークフローを文書化してください。"
}
```

## 技術詳細

### アーキテクチャ
- **オーケストレーション層**: GPT-5（OpenAI）、Claude Sonnet 4.5（Claude）、またはGrok-4-Fast-Reasoning（xAI）が、MDSLアプリを介した計画、ユーザーインタラクション、ツール調整を処理
- **コード生成層**: OpenAI Code、Claude Sonnet 4.5、またはGrok-Code-Fast-1がWeb/CLIアーティファクトを生成
- **ファイル管理**: Rubyバックエンドがプロジェクトストレージ、コンテキストの永続化、オプションのファイル生成を管理
- **デバッグ層**: Python/Selenium統合がWebアプリの自動テストを提供

### ファイルストレージ
プロジェクトは`~/monadic/data/auto_forge/`に以下の構造で保存されます：
```
auto_forge/
├── TodoApp_20250127_143022/
│   └── index.html
├── Calculator_20250127_151234/
│   └── index.html
├── runtimes-lister_20250928_234449/
│   ├── runtimes_lister.py
│   └── README.md (オプション)
└── ...
```

### コード品質基準
生成されるすべてのアプリケーションは、以下の基準に従います：
- CSS Grid/Flexboxを使用したモダンなレスポンシブデザイン
- バニラJavaScript（外部フレームワークなし）
- セマンティックHTML5要素
- モバイルファーストのレスポンシブデザイン
- アクセシビリティのベストプラクティス（ARIAラベル）
- テーマ設定用のCSS変数

## 高度な機能

### 既存アプリケーションの変更
既存のアプリケーションを変更するには：
1. 以前と同じアプリケーション名を使用
2. 必要な変更を指定
3. システムが最新バージョンを見つけて更新

### 新規作成
新しいバージョンをゼロから作成するには：
1. 同じ名前を使用し、仕様に`"reset": true`を追加
2. これにより、新しい実装で新しいプロジェクトフォルダーが作成されます

### デバッグレポート
Webアプリに対して`debug_application`を使用すると、以下が得られます：
- JavaScriptエラーリスト
- コンソール警告
- 機能テスト結果（フォーム、ボタン、インタラクティブ要素）
- パフォーマンスメトリクス（読み込み時間、DOM準備、レンダリング時間）
- ビューポート情報

## 要件

### 基本要件
- Rubyバックエンドを備えたMonadic Chat
- 以下のいずれか：
  - GPT-5とOpenAI Codeへのアクセス権を持つOpenAI APIキー
  - Claude Sonnet 4.5へのアクセス権を持つAnthropic APIキー
  - Grok-4-Fast-ReasoningとGrok-Code-Fast-1へのアクセス権を持つxAI APIキー

### オプション要件
- デバッグ機能用のSeleniumコンテナを備えたDocker（Webアプリのみ）
- Selenium統合用のPythonコンテナ（Seleniumテスト用）

## アプリケーションスコープ

1. **単一ファイルアプリケーション**: Webプロジェクトは1つのHTMLファイルとして、CLIプロジェクトはスタンドアロンスクリプトとして提供
2. **自己完結型デザイン**: Webアプリは外部CDNの代わりに埋め込みリソースを使用。CLIツールは非標準ライブラリを使用する場合に依存関係マニフェストを生成
3. **クライアントサイドアーキテクチャ**: Webプロジェクトはサーバーコンポーネントなしで完全にブラウザで実行
4. **セッションフォーカス**: 各会話は一度に1つのアプリケーションに焦点を当てる

## ベストプラクティス

1. **明確な要件**: 必要な機能の詳細な説明を提供
2. **反復的開発**: シンプルに始めて、段階的に機能を追加
3. **定期的なテスト**: Webアプリ生成後に`debug_application`を使用して問題を早期発見
4. **意味のある名前**: 簡単に識別できるよう説明的なプロジェクト名を使用

## トラブルシューティング

### 一般的な問題

1. **ファイルが生成されない**: OpenAI CodeまたはClaude Sonnet 4.5は、複雑なアプリで2〜5分かかることがあります。生成実行中、進捗状況がストリーミング一時カードに表示されます
2. **Seleniumが利用できない**: Docker Seleniumコンテナが実行中であることを確認
3. **Unicode文字**: 特殊文字を含むプロジェクト名は完全にサポートされています
4. **カスタムファイルリクエストが拒否される**: ファイル名がシンプル（ディレクトリなし）であることを確認し、必要なコンテンツを説明する明確な指示を含めてください

### エラーメッセージ

- "Missing required parameters": すべての仕様フィールドが提供されていることを確認
- "Selenium container is not running": Monadic Chat設定でSeleniumを有効化
- "Project not found": list_projectsで正確なプロジェクト名を確認

## プロバイダーサポートと進捗更新

AutoForgeは複数のプロバイダーをサポートします：
- **OpenAI Auto Forge**: GPT-5がワークフローをオーケストレートし、OpenAI Codeがコード生成を処理
- **Claude Auto Forge**: Claude Sonnet 4.5がClaude Responses APIを介してオーケストレートとコード生成を実行
- **Grok Auto Forge**: Grok-4-Fast-Reasoningがワークフローをオーケストレートし、Grok-Code-Fast-1がコード生成を処理

すべてのバリアントは、ステータスバーを監視することなく生成を追跡できるよう、長時間実行の進捗更新をストリーミング一時カードにブロードキャストします。

### Grok固有の特性

Grok-Code-Fast-1が優れている点：
- **高速な反復**: 92トークン/秒のスループットで高速生成
- **フロントエンド開発**: HTML/CSS/JavaScript、SVGグラフィックス、アニメーション
- **モダンCSS**: Grid、Flexbox、CSS変数
- **コスト効率**: OpenAI Codeより6〜7倍安価

Grok-Code-Fast-1が最適化されている点：
- 反復開発を伴う小規模で焦点を絞ったタスク
- ビジュアルコンポーネントとシンプルなアニメーション
- バニラJavaScript実装
- 自己完結型の単一ファイルアプリケーション
