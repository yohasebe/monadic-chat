# よくある質問

---

**Q**: Monadic Chatを使うのにOpenAIのAPIトークンは必要ですか？

**A**:はい、AIとのチャットの他に音声認識、音声合成、テキスト埋め込みの作成などでも使用するため、OpenAIのAPIトークンが必要です。チャットではAnthropicのClaudeなどOpenAI以外のAPIを主に使用する場合でもOpenAIのAPIトークンは必要です。

---

**Q**: Monadic Chatの再構築（コンテナ群のrebuild）に失敗します。どうしたらいいですか？

**A**: 追加アプリの開発や、既存アプリの変更などを行っている場合は、共有フォルダのmonadic.logの内容を確認してください。エラーメッセージが表示されている場合は、その内容に基づいて、アプリのコードの修正を行ってください。

アプリの開発や変更を行っておらず、ログにエラーメッセージが表示されていない場合は、いったん共有フォルダのサブフォルダ（`apps`や`services`など）を別の場所に退避させ、再構築を行ってください。

---

**Q**: Ollamaのプラグインを導入して、モデルをダウンロードしましたが、webインターフェイスに反映されません。どうしたらいいですか？

**A**: 
Ollamaコンテナにダウンロードしたモデルはロードされて使用可能になるまでに少し時間がかかる場合があります。少し待ってから、webインターフェイスをリロードしてください。それでもダウンロードしたモデルが表示されない場合は、ターミナルからOllamaコンテナにアクセスして、`ollama list` コマンドを実行して、ダウンロードしたモデルがリストに表示されているか確認してください。表示されていない場合は、`ollama reload` コマンドを実行して、Ollamaのプラグインを再読み込みしてください。

---

**Q**: Webインターフェイス上の各メッセージの右上にあるボタンとアイコンの役割を説明してください。

**A**: それぞれのボタンとアイコンの役割は以下の通りです。

![](/assets/images/message-buttons.png ':size=600')

- **Copy**<br />メッセージのテキストをクリップボードにコピーします。
- **Play**<br />メッセージのテキストを音声合成して再生します。
- **Stop**<br />合成音声の再生を停止します。
- **Delete**<br />メッセージを削除します。
- **Edit**<br />メッセージを編集します。
- **Active/Inactive**<br />メッセージがアクティブなときはグリーンになります。

メッセージのアクティブ／インアクティブの状態は、webインターフェイス上でのコンテクストサイズ設定と最大トークン数の設定に応じて変化します。アクティブなメッセージは、APIを通じてLLMに送信されるコンテキストの一部として使用されます。

---

**Q**: Monadic Chat Statsに表示されるトークン数はどのように計算されますか？


**A**: Pythonコンテナ上にインストールされた[tiktoken](https://github.com/openai/tiktoken)を用いて計算しています。選択されているモデルにかかわらず `o200k_base` エンコーディングを用いているため、GPT-4系列以外のモデルを選択している場合は必ずしも正確な値になりません。トークン数は近似値としてお考えください。

---

**Q**: 音声合成の際に実際の言語とは異なる言語で再生されることがあります。どうすればいいですか？

**A**: Webインターフェイスの`Automatic-Speech-Recognition (ASR) Language`セレクタはデフォルトでは`Automatic`になっています。これを特定の言語に設定することで、音声合成の際に指定した言語で再生されるようになります。

---

**A**: メッセージ入力ボックスの上にある`Role`セレクタにはどういう役割がありますか？

**Q**: それぞれ次の役割があります。

![](/assets/images/role-selector.png ':size=400')

- **User**<br />通常はこれを選択します。ユーザーとしてメッセージを入力し、直ちにAIエージェントに送信してレスポンスを求めます。
- **User (to add to past messages)**<br />ユーザーとしてメッセージを入力しますが、コンテクストの一部として過去のメッセージに追加する目的で使用します。AIエージェントからの直接的なレスポンスを求めません。
- **Assistant (to add to past messages)**<br />AIアシスタントからのメッセージとしてテキストを追加します。コンテクストの一部として過去のメッセージに追加する目的で使用します。
- **System (to provide additional direction)**<br />追加のシステム・プロンプトを提供するために使用します。

---

**Q**: テキスト以外のデータをAIエージェントに送信することはできますか？

**A**: はい、画像については選択したモデルが対応している場合、`Use Image`ボタンをクリックして画像をアップロードすることができます。繰り返し行うことで複数の画像をアップロードすることもできます。

その他のメディアについては、共有フォルダにファイルを配置し、ファイル名（パスは不要）をメッセージボックスで指定してAIエージェントに伝えてください。選択しているアプリが対応している場合、AIエージェントはファイルを読み込んで処理します。

次の基本アプリはファイルの読み込みに対応しています。

- Code Interpreter<br />PythonスクリプトやCSVを含む各種のテキストファイル、Microsoft Officeファイル、オーディオファイル（MP3, WAV）
- Content Reader<br />テキストファイル、PDFファイル、Microsoft Officeファイル、オーディオファイル（MP3, WAV）
- PDF Reader<br />PDFファイル
- Video Description<br />動画ファイル（MP4, MOV）

`Voice Input`ボタンをクリックして音声入力を行うこともできます。音声入力はWhisper APIを使用しており、すべてのアプリで利用可能です。

---

**Q**: 入力テキストを音声合成してMP3ファイルとして保存することはできますか？

**A**: はい、`Speech Draft Helper`アプリを選択して、テキストを入力した上で、MP3ファイルに変換するようにAIエージェントに指示することで、音声合成した結果をファイルとして保存することができます。

---

**Q**: AIエージェントと音声による会話を行うことはできますか？

**A**: はい、可能です。Webインターフェイスの`Chat Interaction Cotrols`で`Auto speech`と`Easy submit`を両方有効にしてください。音声メッセージの入力開始と入力完了を（ボタンをクリックすることなく）Enterキーの打鍵で行うことができます。また、入力完了時にメッセージが自動的に送信され、AIエージェントからのレスポンスの合成音声が再生されます。つまり、タイミングよくエンターキーを押すだけで、AIエージェントと音声による会話を行うことができます。
